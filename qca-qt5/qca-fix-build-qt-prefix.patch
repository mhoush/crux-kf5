diff --git a/CMakeLists.txt b/CMakeLists.txt
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -431,7 +431,6 @@
     message("!! you MUST explicity define CMAKE_INSTALL_PREFIX !!")
     message("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
     message("${ESCAPE}[0m")
-    message(FATAL_ERROR "Aborting")
   endif(QCA_INSTALL_IN_QT_PREFIX)
 
   message("")
diff --git a/cmake/modules/QcaMacro.cmake b/cmake/modules/QcaMacro.cmake
--- a/cmake/modules/QcaMacro.cmake
+++ b/cmake/modules/QcaMacro.cmake
@@ -11,14 +11,15 @@
   ENDMACRO(QT4_GET_MOC_INC_DIRS)
 
   MACRO(SETUP_QT5_DIRS)
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_LIBS" OUTPUT_VARIABLE QT_LIBRARY_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_PREFIX" OUTPUT_VARIABLE QT_PREFIX_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_PLUGINS" OUTPUT_VARIABLE QT_PLUGINS_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_BINS" OUTPUT_VARIABLE QT_BINARY_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_HEADERS" OUTPUT_VARIABLE QT_HEADERS_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_DOCS" OUTPUT_VARIABLE QT_DOC_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_INSTALL_DATA" OUTPUT_VARIABLE QT_DATA_DIR )
-    EXECUTE_PROCESS( COMMAND $<TARGET_FILE:Qt5::qmake> ARGS "-query QT_HOST_DATA" OUTPUT_VARIABLE QT_ARCHDATA_DIR )
+    GET_TARGET_PROPERTY(QMAKE_EXECUTABLE ${Qt5Core_QMAKE_EXECUTABLE} LOCATION)
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_LIBS" OUTPUT_VARIABLE QT_LIBRARY_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_PREFIX" OUTPUT_VARIABLE QT_PREFIX_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_PLUGINS" OUTPUT_VARIABLE QT_PLUGINS_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_BINS" OUTPUT_VARIABLE QT_BINARY_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_HEADERS" OUTPUT_VARIABLE QT_HEADERS_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_DOCS" OUTPUT_VARIABLE QT_DOC_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_DATA" OUTPUT_VARIABLE QT_DATA_DIR )
+    EXEC_PROGRAM( ${QMAKE_EXECUTABLE} ARGS "-query QT_HOST_DATA" OUTPUT_VARIABLE QT_ARCHDATA_DIR )
     SET( QT_MKSPECS_DIR "${QT_ARCHDATA_DIR}/mkspecs" )
   ENDMACRO(SETUP_QT5_DIRS)
 ELSE (Qt5Core_FOUND)
@@ -101,8 +102,13 @@
 
 macro(install_pdb TARGET INSTALL_PATH)
   if(MSVC)
-    install(FILES $<TARGET_PDB_FILE:${TARGET}> DESTINATION ${INSTALL_PATH} CONFIGURATIONS Debug)
-    install(FILES $<TARGET_PDB_FILE:${TARGET}> DESTINATION ${INSTALL_PATH} CONFIGURATIONS RelWithDebInfo)
+    get_target_property(LOCATION ${TARGET} LOCATION_DEBUG)
+    string(REGEX REPLACE "\\.[^.]*$" ".pdb" LOCATION "${LOCATION}")
+    install(FILES ${LOCATION} DESTINATION ${INSTALL_PATH} CONFIGURATIONS Debug)
+
+    get_target_property(LOCATION ${TARGET} LOCATION_RELWITHDEBINFO)
+    string(REGEX REPLACE "\\.[^.]*$" ".pdb" LOCATION "${LOCATION}")
+    install(FILES ${LOCATION} DESTINATION ${INSTALL_PATH} CONFIGURATIONS RelWithDebInfo)
   endif(MSVC)
 endmacro(install_pdb)
 

