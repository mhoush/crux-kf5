# Description: Qt5 GUI for heaptrack
# URL: http://milianw.de/tag/heaptrack
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: boost dbus freetype glib harfbuzz heaptrack karchive kauth kcodecs kcompletion kconfig kconfigwidgets kcoreaddons kcrash kdbusaddons kdiagram kguiaddons ki18n kiconthemes kio kitemmodels kitemviews kjobwidgets kservice kwidgetsaddons kwindowsystem libglvnd libpng qt5 threadweaver xorg-libice xorg-libsm xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxext xorg-libxfixes xorg-libxrender xorg-xcb-util-keysyms

name=heaptrack-gui
version=1.2.0
release=1
source=(https://github.com/KDE/${name/-gui}/archive/v${version}/$name-$version.tar.gz)

build() {
	cd ${name/-gui/}-$version
	mkdir build; cd build

	cmake -DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release \
		-DBUILD_TESTING=OFF \
		-DHEAPTRACK_BUILD_GUI=ON \
		..

	make
	make DESTDIR=$PKG install

	# Remove files already provided by heaptrack
	rm $PKG/usr/bin/heaptrack{,_print}
	rm -rf $PKG/usr/include
	rm -rf $PKG/usr/lib/heaptrack
}
