# Description: Open source multimedia framework, designed and developed for television broadcasting
# URL: http://www.mltframework.org/
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: ffmpeg gtk libexif libsamplerate libsdl2 qt5 sdl_image sox

name=mlt
version=6.4.1
release=2
source=(http://sourceforge.net/projects/$name/files/$name/$name-$version.tar.gz)

build() {
	cd $name-$version

	# Disable PulseAudio
	sed -i 's|-D__LINUX_PULSE__||' src/modules/rtaudio/Makefile 

	./configure --prefix=/usr \
	--sysconfdir=/usr/etc \
	--qt-includedir=/usr/include/qt5 \
	--qt-libdir=/usr/lib \
	--enable-gpl \
	--enable-gpl3 \
	--disable-static \
	--enable-shared

	# Force usage of C++11, as required by qt5
	sed -i 's|^CXXFLAGS.*|& -std=c++11|' config.mak

	make

	make DESTDIR=$PKG install
}
