# Description: Library that provides automatic proxy configuration management
# URL: https://libproxy.github.io/libproxy/
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: cmake networkmanager

name=libproxy
version=0.4.15
release=1
source=(https://github.com/$name/$name/archive/$version.tar.gz
	libproxy.revdep)

build() {
	cd $name-$version
	mkdir build; cd build

	cmake -DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release \
		-DLIBEXEC_INSTALL_DIR=/usr/lib/libproxy \
		-DWITH_MOZJS=ON \
		..
	make
	make DESTDIR=$PKG install

	# fix revdep false positive for libperl.so
	install -Dm644 $SRC/libproxy.revdep $PKG/etc/revdep.d/libproxy
}
