# Description: Graphviz is open source graph visualization software
# URL: http://www.graphviz.org
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: freeglut ghostscript glade gtkglext libgd swig tcl

name=graphviz
version=2.44.1
release=2
source=(https://gitlab.com/graphviz/graphviz/-/archive/${version}/$name-$version.tar.bz2)

build() {
	cd $name-${version}

	./autogen.sh
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--libdir=/usr/lib \
		--disable-static \
		--enable-python3=yes \
		--disable-python

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/lib64
	mkdir $PKG/usr/lib/tcl8.6
	cd $PKG/usr/lib/tcl8.6
	ln -svf ../graphviz/tcl graphviz

	rm -rf $PKG/usr/share/doc $PKG/usr/share/graphviz/doc
	find $PKG -iname "*.readme" -delete
}
