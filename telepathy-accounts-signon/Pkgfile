# Description: Telepathy providers for libaccounts/libsignon borrowed from Empathy
# URL: https://gitlab.com/accounts-sso/telepathy-accounts-signon
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: libaccounts-glib libsignon-glib telepathy-mission-control

name=telepathy-accounts-signon
version=1.0
release=2
source=(libsignon-glib-2.0.patch)

build() 
{
	git clone https://gitlab.com/accounts-sso/$name.git --branch=$version
	cd $name

	cd mcp-account-manager-accounts-sso
	# fix build with libsignon-glib 2.0
	patch -Np2 -i $SRC/libsignon-glib-2.0.patch
	cd -

	qmake-qt5 PREFIX=/usr LIBDIR=/usr/lib

	make
	make INSTALL_ROOT=$PKG install
	rm -rf $PKG/usr/share/doc
}
