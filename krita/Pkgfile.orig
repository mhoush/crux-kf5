# Description: Digital painting application
# URL: https://www.krita.org
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: boost dbus eigen exiv2 expat fftw fontconfig freetype giflib glib gsl gtk harfbuzz ilmbase jasper karchive kauth kcompletion kconfig kcoreaddons kcrash kdbusaddons kguiaddons ki18n kio kitemmodels kitemviews kservice kwidgetsaddons kwindowsystem lcms2 libdrm libffi libjpeg-turbo libpng libraw libtiff libxml2 llvm mesa3d opencolorio openexr poppler poppler-qt5 qt5 tinyxml vc xorg-libice xorg-libsm xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdamage xorg-libxdmcp xorg-libxext xorg-libxfixes xorg-libxi xorg-libxrender xorg-libxshmfence xorg-libxxf86vm xorg-xcb-util xorg-xcb-util-keysyms xorg-xinput

name=krita
version=4.0.2
release=1
source=(http://download.kde.org/stable/$name/$version/$name-$version.tar.gz)

build() {

	cd $SRC
	mkdir build; cd build

	cmake \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DSYSCONF_INSTALL_DIR=/usr/etc \
	-DLIB_INSTALL_DIR=/usr/lib \
	-DBUILD_TESTING=OFF \
	-DKDE_INSTALL_USE_QT_SYS_PATHS=ON \
	-DCMAKE_BUILD_TYPE=Release \
	-DCMAKE_CXX_FLAGS="-DKDE_NO_DEBUG_OUTPUT" \
	-Wno-dev \
	../$name-$version
	
	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share/locale
	rm -rf $PKG/usr/share/man/{ca,de,it,nl,pt_BR,sv,uk,ru}
	rm -rf $PKG/usr/share/doc
	find $PKG -type f -name "README.*" -delete
	find $PKG -type f -name "README" -delete
}
