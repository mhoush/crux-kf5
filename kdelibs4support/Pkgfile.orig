# Description: Part of KDE Frameworks
# URL: https://www.kde.org
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: dbus freetype glib harfbuzz karchive kauth kbookmarks kcodecs kcompletion kconfig kconfigwidgets kcoreaddons kcrash kdbusaddons kded kdesignerplugin kemoticons kglobalaccel kguiaddons ki18n kiconthemes kio kitemmodels kitemviews kjobwidgets knotifications kparts kservice ktextwidgets kunitconversion kwidgetsaddons kwindowsystem kxmlgui libcanberra libdbusmenu-qt5 libglvnd libogg libpng libvorbis networkmanager qt5 solid sonnet xorg-libice xorg-libsm xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxext xorg-libxfixes xorg-libxi xorg-libxtst xorg-xcb-util-keysyms

name=kdelibs4support
version=5.91.0
release=1
source=(http://download.kde.org/stable/frameworks/${version%.0}/portingAids/$name-$version.tar.xz)

build() {
	cd $name-$version

	cmake \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DLIBEXEC_INSTALL_DIR=lib \
	-DBUILD_TESTING=OFF \
	-DKDE_INSTALL_USE_QT_SYS_PATHS=ON \
	-DCMAKE_BUILD_TYPE=Release \
	-Wno-dev

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share/locale
	( cd $PKG/usr/share/man
	  find . ! -path . -type d | grep -v "man[0-9]" | xargs rm -rf
	)
	rm -rf $PKG/usr/share/doc
}
