# Description: Part of KDE Frameworks
# URL: https://www.kde.org
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: dbus freetype glib harfbuzz kactivities karchive kauth kcodecs kcompletion kconfig kconfigwidgets kcoreaddons kcrash kdbusaddons kdeclarative kglobalaccel kguiaddons ki18n kiconthemes kio kirigami2 kitemviews kjobwidgets knotifications kpackage kservice kwayland kwidgetsaddons kwindowsystem kxmlgui libcanberra libdbusmenu-qt5 libglvnd libogg libpng libvorbis qt5 solid wayland xorg-libice xorg-libsm xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxext xorg-libxfixes xorg-libxi xorg-libxtst xorg-xcb-util-keysyms

name=plasma-framework
version=5.91.0
release=1
source=(http://download.kde.org/stable/frameworks/${version%.0}/$name-$version.tar.xz)

build() {
	cd $name-$version

	cmake \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DSYSCONF_INSTALL_DIR=/etc \
	-DLIB_INSTALL_DIR=/usr/lib \
	-DBUILD_TESTING=OFF \
	-DKDE_INSTALL_USE_QT_SYS_PATHS=ON \
	-DCMAKE_BUILD_TYPE=Release \
	-Wno-dev

	make
	make DESTDIR=$PKG install

	rm -rf $PKG/usr/share/{locale,doc}
	( cd $PKG/usr/share/man
	  find . ! -path . -type d | grep -v "man[0-9]" | xargs rm -rf
	)	
	find $PKG -name README.md -delete
}
